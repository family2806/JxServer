  StartTimeGenItem = 1281891600
  EndTimeGenItem  = 1282093200
  Task_Limit_Do = 2724
  tbHuyenVien=
  {
  		{szName = "ÐþÔ³Ö®ÖÇ»ÛÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Ö®Ô²Âú·ðÖé ", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³Ö®Ô²ÂúÑü´ø", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³Ö®Ô²ÂúÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Ö®Ô²ÂúÉ®Ð¬", tbProp = {0, 5, 0}},	
		{szName = "ÐþÔ³·ðÐÄÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³·ðÐÄ»¤Íó", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³·ðÐÄÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³·ðÐÄÑü´ø", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³³åÌìÑü´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³³åÌìîø", tbProp = {0, 2, 4}},	
		{szName = "ÐþÔ³³åÌìÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³³åÌìÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³·ÉÔÆÑü´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³·ÉÔÆÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³·ÉÔÆÑ¥", tbProp = {0, 5, 0}},	
		{szName = "ÐþÔ³Ó¢ÓÂ¿ø", tbProp = {0, 7, 4}},	
		{szName = "ÐþÔ³Ó¢ÓÂÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³¾²ÒôÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³¾²ÒôÏãÄÒ", tbProp = {0, 9, 0}},	
		{szName = "ÐþÔ³¾²Òô»¤Íó", tbProp = {0, 8, 0}},	
		{szName = "ÐþÔ³¾²ÒôÖéÁ´", tbProp = {0, 4, 0}},	
		{szName = "ÐþÔ³º®±ùÊøÑü", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³º®±ùÖéÁ´", tbProp = {0, 4, 0}},	
		{szName = "ÐþÔ³º®±ùÐ¬", tbProp = {0, 5, 3}},	
		{szName = "ÐþÔ³º®±ùÏãÄÒ", tbProp = {0, 9, 0}},	
		{szName = "ÐþÔ³ÔÂ»ªÏãÄÒ", tbProp = {0, 9, 0}},	
		{szName = "ÐþÔ³ÔÂ»ªÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³ÔÂ»ªÐä", tbProp = {0, 8, 0}},	
		{szName = "ÐþÔ³ÔÂ»ªÖéÁ´", tbProp = {0, 4, 0}},	
		{szName = "ÐþÔ³·±»ªÖéÁ´", tbProp = {0, 4, 0}},	
		{szName = "ÐþÔ³¶Ï³¦ÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³¶Ï³¦Ñü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³¶Ï³¦ÃØ×°", tbProp = {0, 2, 2}},	
		{szName = "ÐþÔ³¶Ï³¦Ñü´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³ÑªÉ·ÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÑªÉ·Ñü´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³ÑªÉ·Ñü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÑªÉ·ÃØ×°", tbProp = {0, 2, 2}},	
		{szName = "ÐþÔ³ÀäÐÄ²øÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³ÀäÐÄ¼×ÒÂ", tbProp = {0, 2, 3}},	
		{szName = "ÐþÔ³ÀäÐÄÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÀäÐÄ×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÎÞÇéÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³ÎÞÇéÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÎÞÇéÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÎÞÇéÂÄ", tbProp = {0, 5, 1}},	
		{szName = "ÐþÔ³º®¹âÂÄ", tbProp = {0, 5, 1}},	
		{szName = "ÐþÔ³º®¹âÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³º®¹âÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³º®¹â×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Ñô¸ÕÑ¥", tbProp = {0, 5, 0}},	
		{szName = "ÐþÔ³Ñô¸ÕÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³Ñô¸ÕÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³Ñô¸ÕÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Õ½ÁúÑü×¹", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Õ½ÁúÊøÑü", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³Õ½Áú»¤Íó", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³Õ½ÁúÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÀÓ»êÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÀÓ»êÑü´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³ÀÓ»ê»¤Íó", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³ÀÓ»êÏîÈ¦", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³×ÆÇéÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³×ÆÇé»¤Íó", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³×ÆÇé¹ÚÃá", tbProp = {0, 7, 2}},	
		{szName = "ÐþÔ³×ÆÇéÏîÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³Èý·áÂÄ", tbProp = {0, 5, 0}},	
		{szName = "ÐþÔ³Èý·áÓñÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³Èý·á·¢´ø", tbProp = {0, 6, 1}},	
		{szName = "ÐþÔ³Èý·á·û", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÐÞÐÄÓñÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÐÞÐÄÐä", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³ÐÞÐÄ·û", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³ÐÞÐÄ·¢´ø", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³´©ÔÆÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³´©ÔÆÁ´", tbProp = {0, 4, 1}},	
		{szName = "ÐþÔ³´©ÔÆ»¤Íó", tbProp = {0, 8, 1}},	
		{szName = "ÐþÔ³´©ÔÆÑü´ø", tbProp = {0, 6, 0}},	
		{szName = "ÐþÔ³ÆÆ±ùÅå", tbProp = {0, 9, 1}},	
		{szName = "ÐþÔ³ÆÆ±ùÊÖ", tbProp = {0, 8, 1}},
  };

 
function  ThuHoiHuyenVien_main(nItemIndex)
	
	if (IsActiveTime()~=1) then
		Talk(1,"","¹¦ÄÜÔÝÊ±¹Ø±Õ !")
		return
	end
	if (GetTask(Task_Limit_Do) >= 4) then
		Talk(1,"","×î¶àÖ»ÄÜ»»4´Î")
		return
	end
	GiveItemUI( "ÊÕ»ØÐþÔ³×°±¸", "·ÅÈëÐþÔ³ÎïÆ·", "ConfirmTask", "no",1 );
end

function ConfirmTask(nCount)
	--Msg2Player("Callll")
	if (nCount ~= 1) then
		Talk(1,"","Ã¿´ÎÖ»ÊÕ»ØÒ»¸öÎïÆ· !")
		return
	end
	local nItemIdx = GetGiveItemUnit(1);
	local nG, nD, nP = GetItemProp(nItemIdx)
	local strItemName = GetItemName(nItemIdx)
	for i=1,getn(tbHuyenVien) do
		local nGen = tbHuyenVien[i].tbProp[1]
		local nDet = tbHuyenVien[i].tbProp[2]
		local nPar = tbHuyenVien[i].tbProp[3]
		local szItemName = tbHuyenVien[i].szName
		if (nGen == nG and nDet == nD and nPar == nP) then
			if (szItemName == strItemName) then
				local nTime = GetItemGenTime(nItemIdx)
				if (CheckTimeGenItem(nTime)==1) then
					SetTask(Task_Limit_Do,GetTask(Task_Limit_Do)+1)
					RemoveItemByIndex(nItemIdx)
					AddEnergy(46000)
					
					Msg2Player("Äã¸Õ¸Õ»¹»Ø×°±¸ "..szItemName)
					Msg2Player("Äã¸Õ¸Õ»ñµÃ 46000 ¾«Á¶Ê¯Öµ£¬Çë¼ì²é !")
					WriteLog(date("%Y%m%d %H%M%S").."\t".."ÊÕ»ØÐþÔ³item"..GetAccount().."\t"..GetName().."\t".."»¹»ØÎïÆ· "..szItemName)
					return
				else
					Talk(1,"","ÎÒÖ»»ñµÃÐþÔ³×°±¸£¬2010Äê8ÔÂ16ÈÕ6Ê±µ½2010Äê8ÔÂ18ÈÕ»»µÄ")
					return
				end
			end
		end
	end--for
	Talk(1,"","ÎÒÖ»»ñµÃÐþÔ³×°±¸£¬2010Äê8ÔÂ16ÈÕ6Ê±µ½2010Äê8ÔÂ18ÈÕ»»µÄ!")
end

function CheckTimeGenItem(nTimeGenItem)
	if (nTimeGenItem >= StartTimeGenItem and nTimeGenItem <= EndTimeGenItem) then
		return 1
	end
	return 0
end

function IsActiveTime()
	local nDate = tonumber(GetLocalDate("%Y%m%d"))
	if (nDate <= 20100905) then
		return 1
	end
	return 0
end

function no()
end
