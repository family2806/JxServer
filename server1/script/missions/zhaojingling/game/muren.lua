Include("\\script\\missions\\zhaojingling\\head.lua")
Include("\\script\\lib\\awardtemplet.lua")

local tbAward = 
{
	[1]={nExp_tl=1,nRate = 50.0,nCount = 40000,},
	[2]={nExp_tl=1,nRate = 14.0,nCount = 80000,},
	[3]={nExp_tl=1,nRate = 5.0,nCount = 150000,},
	[4]={nExp_tl=1,nRate = 1.0,nCount = 300000,},
	[5]={szName="加速丸",tbProp={6,1,2794,1,0,0},nRate = 5.0,},
	[6]={szName="晕眩陷阱",tbProp={6,1,2795,1,0,0},nRate = 5.0,},
	[7]={szName="变慢陷阱",tbProp={6,1,2796,1,0,0},nRate = 5.0,},
	[8]={szName="天雷玉",tbProp={6,1,2797,1,0,0},nRate = 5.0,},
	[9]={szName="寒风玉",tbProp={6,1,2798,1,0,0},nRate = 5.0,},
	[10]={szName="盾地符",tbProp={6,1,2799,1,0,0},nRate = 5.0,},	
}

function main()
	local nNpcIndex = GetLastDiagNpc()
	if (GetNpcParam(nNpcIndex, 1) ~= 1) then
		SetNpcParam(nNpcIndex, 1, 1)
		local nCount = GetTask(TSK_COUNT_ONETIME)
		SetTask(TSK_COUNT_ONETIME, nCount + 1)
		tbAwardTemplet:GiveAwardByList(%tbAward, "找到木人，获得奖励")
		DelNpc(nNpcIndex)
	end
end

function OnTimer(nNpcIndex)
	DelNpc(nNpcIndex)
end