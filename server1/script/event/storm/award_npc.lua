Include("\\script\\event\\storm\\head.lua")
Include("\\script\\lib\\basic.lua")
Include("\\script\\lib\\say.lua")
Include("\\script\\task\\task_addplayerexp.lua"), nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng--╕°═ц╝╥└█╝╙╛н╤щ╡─╣л╣▓║п╩¤

IncludeLib("FILESYS")
IncludeLib("TITLE")
IncludeLib("ITEM")

--danh, nh╦n онюc ph╟n thныng┤╬╡─╬─╫╓├ш╩Ў
TB_STORM_LADDERNAME, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{"Qu╕n, nh╦n онюc ph╟n thныngquйn",, nh╦n онюc ph╟n thныng"╕, nh╦n онюc ph╟n thныngquйn",, nh╦n онюc ph╟n thныng"H╣ng, nh╦n онюc ph╟n thныng3",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng4",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng5",
	"H╣ng, nh╦n онюc ph╟n thныng6",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng7",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng8",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng9",, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныngH╣ng, nh╦n онюc ph╟n thныng10",, nh╦n онюc ph╟n thныng"khлng, nh╦n онюc ph╟n thныngcу, nh╦n онюc ph╟n thныngtrong, nh╦n онюc ph╟n thныngb╢ng, nh╦n онюc ph╟n thныngx╒p, nh╦n онюc ph╟n thныngh╣ng",, nh╦n онюc ph╟n thныng"Khлng, nh╦n онюc ph╟n thныngcу, nh╦n онюc ph╟n thныngx╒p, nh╦n онюc ph╟n thныngh╣ng"}

--╬ф┴╓├╦┤л╚╦	
STORM_WLMCR, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"<#><link=image[0,1]:\\spr\\npcres\\passerby\\passerby092\\passerby092_st.spr>Vт, nh╦n онюc ph╟n thныnglйm, nh╦n онюc ph╟n thныngtruy╥n, nh╦n онюc ph╟n thныngnhйn<link>"

--╝ь▓щ╓╕╢и╡─awardtype
--awardid, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil	╖╡╗╪г║╗¤phєt+/-┼┼╨╨	┐╔╥╘l╖nh╚б╡─╦∙╙╨╜▒└°
--awardid, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0		╖╡╗╪г║nil▓╗┐╔╥╘l╖nh╚б	╖ё╘Є╖╡╗╪╗¤phєt+/-┼┼╨╨
function, nh╦n онюc ph╟n thныngstorm_checkaward(awardtype,, nh╦n онюc ph╟n thныngawardid)
	storm_anotherday()
	
	if, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil, nh╦n онюc ph╟n thныngor, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
		return, nh╦n онюc ph╟n thныngnil
	end
	
	if, nh╦n онюc ph╟n thныng(GetTask(TB_STORM_AWARD[awardtype][3]), nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
		Say("Xin, nh╦n онюc ph╟n thныnglчi!, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][1].."ph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныngcёa, nh╦n онюc ph╟n thныngngнмi, nh╦n онюc ph╟n thныngо╖, nh╦n онюc ph╟n thныngnh╦n, nh╦n онюc ph╟n thныngqua, nh╦n онюc ph╟n thныngrхi!",, nh╦n онюc ph╟n thныng0)
		return, nh╦n онюc ph╟n thныngnil
	end
	
	local, nh╦n онюc ph╟n thныngawardvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng0
	if, nh╦n онюc ph╟n thныng(TB_STORM_AWARD[awardtype][2], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen
		awardvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng-storm_getrank(awardtype)	--╙├╕║╩¤╫ў▒╚╜╧╕№╖╜▒у
	else
		awardvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngGetTask(TB_STORM_AWARD[awardtype][4])
	end
	
	if, nh╦n онюc ph╟n thныng(awardid, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
		local, nh╦n онюc ph╟n thныngtb_award, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
		local, nh╦n онюc ph╟n thныngawardlevel, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardvalue
		for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныnggetn(TB_STORM_AWARD[awardtype][5]), nh╦n онюc ph╟n thныngdo
			if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][i][1]), nh╦n онюc ph╟n thныngthen
				if, nh╦n онюc ph╟n thныng(awardlevel, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][i][1], nh╦n онюc ph╟n thныngor, nh╦n онюc ph╟n thныnggetn(tb_award), nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen	--▓╗─▄l╖nh╡═╝╢╜▒└°
					awardlevel, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][i][1]
					tb_award[getn(tb_award)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngi
				end
			end
		end
		return, nh╦n онюc ph╟n thныngawardvalue,, nh╦n онюc ph╟n thныngtb_award
	else
		if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng<, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][awardid][1]), nh╦n онюc ph╟n thныngthen
			Say("Vт, nh╦n онюc ph╟n thныnglйm, nh╦n онюc ph╟n thныngtruy╥n, nh╦n онюc ph╟n thныngnhйn:, nh╦n онюc ph╟n thныngH╫nh, nh╦n онюc ph╟n thныngnhн, nh╦n онюc ph╟n thныngngнмi, nh╦n онюc ph╟n thныngkhлng, nh╦n онюc ph╟n thныngth╙, nh╦n онюc ph╟n thныngnh╦n, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныngn╡y!",, nh╦n онюc ph╟n thныng0)
			return, nh╦n онюc ph╟n thныngnil
		else
			return, nh╦n онюc ph╟n thныngawardvalue
		end
	end
end

--╓ў╢╘╗░
function, nh╦n онюc ph╟n thныngstorm_main()
	if, nh╦n онюc ph╟n thныng(GetTask(STORM_TASKID_LETTER), nh╦n онюc ph╟n thныng~=, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen
		Describe(STORM_WLMCR.."<#>, nh╦n онюc ph╟n thныngKi╒p, nh╦n онюc ph╟n thныnggiang, nh╦n онюc ph╟n thныnghх, nh╦n онюc ph╟n thныngl╩y, nh╦n онюc ph╟n thныngsлng, nh╦n онюc ph╟n thныngnєi, nh╦n онюc ph╟n thныngl╡, nh╦n онюc ph╟n thныngnh╡!, nh╦n онюc ph╟n thныngNg╚ng, nh╦n онюc ph╟n thныngm╞t, nh╦n онюc ph╟n thныngnh╫n, nh╦n онюc ph╟n thныngtrиng,, nh╦n онюc ph╟n thныngcuшi, nh╦n онюc ph╟n thныngо╟u, nh╦n онюc ph╟n thныngmh╫n, nh╦n онюc ph╟n thныngnнэc!, nh╦n онюc ph╟n thныngChюt, nh╦n онюc ph╟n thныngngh▄, nh╦n онюc ph╟n thныngо╒n, nh╦n онюc ph╟n thныngcйu, nh╦n онюc ph╟n thныngthм:, nh╦n онюc ph╟n thныngV▌, nh╦n онюc ph╟n thныngthЎ, nh╦n онюc ph╟n thныngонъng, nh╦n онюc ph╟n thныngоъi, nh╦n онюc ph╟n thныngb╗ng, nh╦n онюc ph╟n thныngph╝ng, nh╦n онюc ph╟n thныngm╖i,, nh╦n онюc ph╟n thныnganh, nh╦n онюc ph╟n thныnghяng, nh╦n онюc ph╟n thныngh╡o, nh╦n онюc ph╟n thныngki╓t, nh╦n онюc ph╟n thныngcу, nh╦n онюc ph╟n thныnghмn, nh╦n онюc ph╟n thныngai!",, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныng"B╛t, nh╦n онюc ph╟n thныngо╟u, nh╦n онюc ph╟n thныngho╣t, nh╦n онюc ph╟n thныngощng, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngba, nh╦n онюc ph╟n thныngth╕ng, nh╦n онюc ph╟n thныng9/storm_main")
		Msg2Player("B╣n, nh╦n онюc ph╟n thныngnh╦n, nh╦n онюc ph╟n thныngонюc, nh╦n онюc ph╟n thныngb╢n, nh╦n онюc ph╟n thныngth╢o, nh╦n онюc ph╟n thныngth╟n, nh╦n онюc ph╟n thныngb▌, nh╦n онюc ph╟n thныngcёa, nh╦n онюc ph╟n thныngTh╚m, nh╦n онюc ph╟n thныngThi╓u, nh╦n онюc ph╟n thныngVi╘n")
		AddItem(6,, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныng898,, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныng0, nh╦n онюc ph╟n thныng,0)
		SetTask(STORM_TASKID_LETTER,, nh╦n онюc ph╟n thныng2)
	else
		local, nh╦n онюc ph╟n thныngtb_option, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngmuшn, nh╦n онюc ph╟n thныngl╖nh, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныnghлm, nh╦n онюc ph╟n thныngnay/#storm_award(1)"
		if, nh╦n онюc ph╟n thныng(GetTask(STORM_TASKID_DAY_LASTAWARD), nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
			tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngmuшn, nh╦n онюc ph╟n thныngl╖nh, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныnghлm, nh╦n онюc ph╟n thныngqua/#storm_award(4)"
		end
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngmuшn, nh╦n онюc ph╟n thныngl╖nh, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныngtu╟n, nh╦n онюc ph╟n thныngtrнэc/#storm_award(2)"
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngmuшn, nh╦n онюc ph╟n thныngl╖nh, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныngth╕ng, nh╦n онюc ph╟n thныngtrнэc/#storm_award(3)"
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"T╫m, nh╦n онюc ph╟n thныnghi╙u, nh╦n онюc ph╟n thныngоi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngcёa, nh╦n онюc ph╟n thныngta/#storm_query(0)"
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"T╫m, nh╦n онюc ph╟n thныnghi╙u, nh╦n онюc ph╟n thныngho╣t, nh╦n онюc ph╟n thныngощng, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa/storm_help"
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Khлng, nh╦n онюc ph╟n thныngc╟n!/OnCancel"
		Describe(STORM_WLMCR.."<#>, nh╦n онюc ph╟n thныngXin, nh╦n онюc ph╟n thныngxem, nh╦n онюc ph╟n thныngthлng, nh╦n онюc ph╟n thныngtin, nh╦n онюc ph╟n thныngchi, nh╦n онюc ph╟n thныngti╒t, nh╦n онюc ph╟n thныngho╣t, nh╦n онюc ph╟n thныngощng, nh╦n онюc ph╟n thныngtrкn, nh╦n онюc ph╟n thныngtrang, nh╦n онюc ph╟n thныngchё, nh╦n онюc ph╟n thныng",, nh╦n онюc ph╟n thныnggetn(tb_option),, nh╦n онюc ph╟n thныngtb_option)
	end
	storm_anotherday()
end

--l╖nh╚б╜▒└°ги▓щ┐┤╜▒└°гй
function, nh╦n онюc ph╟n thныngstorm_award(awardtype)
	local, nh╦n онюc ph╟n thныngawardvalue,, nh╦n онюc ph╟n thныngtb_award, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstorm_checkaward(awardtype)
	if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
		return
	end
	
	local, nh╦n онюc ph╟n thныngstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng""
	if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"B╣n, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][1].."t▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa, nh╦n онюc ph╟n thныngl╡:"..storm_point2str(awardvalue)
	elseif, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng-12), nh╦n онюc ph╟n thныngthen
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][1].."khлng, nh╦n онюc ph╟n thныngcу, nh╦n онюc ph╟n thныngtrong, nh╦n онюc ph╟n thныngb╢ng, nh╦n онюc ph╟n thныngx╒p, nh╦n онюc ph╟n thныngh╣ng"
	elseif, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng-11), nh╦n онюc ph╟n thныngthen
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"B╣n, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][1].."khлng, nh╦n онюc ph╟n thныngcу, nh╦n онюc ph╟n thныngtrong, nh╦n онюc ph╟n thныngb╢ng, nh╦n онюc ph╟n thныngx╒p, nh╦n онюc ph╟n thныngh╣ng"
	elseif, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng-3), nh╦n онюc ph╟n thныngthen
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"B╣n, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][1].."trong, nh╦n онюc ph╟n thныngho╣t, nh╦n онюc ph╟n thныngощng, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngba, nh╦n онюc ph╟n thныngth╕ng, nh╦n онюc ph╟n thныng9"..storm_point2str(TB_STORM_LADDERNAME[-awardvalue])
	else
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"B╣n, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][1].."trong, nh╦n онюc ph╟n thныngho╣t, nh╦n онюc ph╟n thныngощng, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngba, nh╦n онюc ph╟n thныngth╕ng, nh╦n онюc ph╟n thныng9┼┼danh, nh╦n онюc ph╟n thныng"..storm_point2str(-awardvalue).."danh, nh╦n онюc ph╟n thныng"
	end
	
	local, nh╦n онюc ph╟n thныngawardcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныnggetn(tb_award)
	if, nh╦n онюc ph╟n thныng(awardcount, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
		local, nh╦n онюc ph╟n thныngtb_option, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
		if, nh╦n онюc ph╟n thныng(awardcount, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr..",, nh╦n онюc ph╟n thныngB╣n, nh╦n онюc ph╟n thныng┐╔╥╘l╖nh╚б╜▒╞╖:, nh╦n онюc ph╟n thныng<enter>"
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<color=green>"..TB_STORM_AWARD[awardtype][5][tb_award[1]][2].."<color><enter>"
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<enter>,, nh╦n онюc ph╟n thныngnh╦n, nh╦n онюc ph╟n thныngbйy, nh╦n онюc ph╟n thныnggiъ, nh╦n онюc ph╟n thныngch°?"
			Say("Vт, nh╦n онюc ph╟n thныnglйm, nh╦n онюc ph╟n thныngtruy╥n, nh╦n онюc ph╟n thныngnhйn:"..str,, nh╦n онюc ph╟n thныng2,, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngmuшn, nh╦n онюc ph╟n thныngnh╦n, nh╦n онюc ph╟n thныngph╟n, nh╦n онюc ph╟n thныngthныng/#storm_getaward("..awardtype..","..tb_award[1]..",0)",, nh╦n онюc ph╟n thныng"з╙, nh╦n онюc ph╟n thныngta, nh╦n онюc ph╟n thныngsuy, nh╦n онюc ph╟n thныngngh▄, nh╦n онюc ph╟n thныngl╣i/OnCancel")
		else
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr..",, nh╦n онюc ph╟n thныngB╣n, nh╦n онюc ph╟n thныng┐╔╥╘T╣i╥╘╧┬╜▒╞phєt╨╚╬╤б╥╗╕Ў:, nh╦n онюc ph╟n thныng<enter>"
			for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныnggetn(tb_award), nh╦n онюc ph╟n thныngdo
				if, nh╦n онюc ph╟n thныng(i, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen
					str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."ho╞c, nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng"
				end
				local, nh╦n онюc ph╟n thныngawardname, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][tb_award[tb_award[i]]][2]
				str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<color=green>"..awardname.."<color><enter>"
				tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"l╖nh"..awardname.."/#storm_getaward("..awardtype..","..tb_award[i]..",0)"
			end
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<enter>, nh╦n онюc ph╟n thныngQuy╒t, nh╦n онюc ph╟n thныngо▐nh, nh╦n онюc ph╟n thныngxong, nh╦n онюc ph╟n thныngchнa?"
			tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Khлng, nh╦n онюc ph╟n thныngc╟n!/OnCancel"
			Say("Vт, nh╦n онюc ph╟n thныnglйm, nh╦n онюc ph╟n thныngtruy╥n, nh╦n онюc ph╟n thныngnhйn:"..str,, nh╦n онюc ph╟n thныnggetn(tb_option),, nh╦n онюc ph╟n thныngtb_option)
		end
	else
		Say("Vт, nh╦n онюc ph╟n thныnglйm, nh╦n онюc ph╟n thныngtruy╥n, nh╦n онюc ph╟n thныngnhйn:"..str..",, nh╦n онюc ph╟n thныngB╣n, nh╦n онюc ph╟n thныng╬▐╖иl╖nh╜▒",, nh╦n онюc ph╟n thныng0)
		return
	end
end

--l╖nh╚б╓╕╢и╜▒╞╖
function, nh╦n онюc ph╟n thныngstorm_getaward(awardtype,, nh╦n онюc ph╟n thныngawardid,, nh╦n онюc ph╟n thныngsure)
	local, nh╦n онюc ph╟n thныngawardvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstorm_checkaward(awardtype,, nh╦n онюc ph╟n thныngawardid)
	if, nh╦n онюc ph╟n thныng(not, nh╦n онюc ph╟n thныngstorm_checkaward(awardtype,, nh╦n онюc ph╟n thныngawardid)), nh╦n онюc ph╟n thныngthen
		return
	end

	if, nh╦n онюc ph╟n thныng(sure, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen
		Say("l╖nh╜▒╟░╒√└э▒│░№!",, nh╦n онюc ph╟n thныng2,, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngо╖, nh╦n онюc ph╟n thныngs╜n, nh╦n онюc ph╟n thныngs╡ng!/#storm_getaward("..awardtype..","..awardid..",2)",, nh╦n онюc ph╟n thныng"Ta, nh╦n онюc ph╟n thныngc▀n, nh╦n онюc ph╟n thныngph╢i, nh╦n онюc ph╟n thныngs╛p, nh╦n онюc ph╟n thныngx╒p, nh╦n онюc ph╟n thныngl╣i, nh╦n онюc ph╟n thныngh╡nh, nh╦n онюc ph╟n thныngtrang/OnCancel")
	elseif, nh╦n онюc ph╟n thныng(sure, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen
		if, nh╦n онюc ph╟n thныng(CalcFreeItemCellCount(), nh╦n онюc ph╟n thныng<, nh╦n онюc ph╟n thныngstorm_countallaward(TB_STORM_AWARD[awardtype][5][awardid][3])), nh╦n онюc ph╟n thныngthen
			Say("B╣n, nh╦n онюc ph╟n thныng╡─▒│░№├╗╙╨┐╒╝фгм╒√└э╥╗╧┬!",, nh╦n онюc ph╟n thныng0)
		else
			if, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1, nh╦n онюc ph╟n thныngor, nh╦n онюc ph╟n thныngawardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng4), nh╦n онюc ph╟n thныngthen
				local, nh╦n онюc ph╟n thныngmapid, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngtostring(SubWorldIdx2ID(SubWorld))
				local, nh╦n онюc ph╟n thныngplcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngGetGlbValue(46), nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныng1
				SetGlbValue(46,, nh╦n онюc ph╟n thныngplcount)
				Ladder_NewLadder(10195,, nh╦n онюc ph╟n thныngmapid,, nh╦n онюc ph╟n thныngplcount,, nh╦n онюc ph╟n thныng1)
			end
			local, nh╦n онюc ph╟n thныngstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Nh╦n, nh╦n онюc ph╟n thныngонюc"..TB_STORM_AWARD[awardtype][1].."Ph╟n, nh╦n онюc ph╟n thныngthныng, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa, nh╦n онюc ph╟n thныng"..TB_STORM_AWARD[awardtype][5][awardid][2]
			WriteLog("[STORM_AWARD]\t"..date("%y-%m-%d,%H:%M").."\t"..GetAccount().."\t"..GetName().."\t"..awardvalue.."\t"..str)
			Msg2Player(str)
			SetTask(TB_STORM_AWARD[awardtype][3],, nh╦n онюc ph╟n thныng1)
			storm_giveallaward(TB_STORM_AWARD[awardtype][5][awardid][3])
			if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
				str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardvalue.."оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa"
			else
				str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"X╒p, nh╦n онюc ph╟n thныngh╣ng, nh╦n онюc ph╟n thныngth°, nh╦n онюc ph╟n thныng"..(-awardvalue).."danh, nh╦n онюc ph╟n thныng"
			end
			if, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2, nh╦n онюc ph╟n thныngor, nh╦n онюc ph╟n thныngawardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng3, nh╦n онюc ph╟n thныngor, nh╦n онюc ph╟n thныngawardid, nh╦n онюc ph╟n thныng<=, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen	--┤є╜▒╖в▓╝╣л╕ц
				AddGlobalNews(GetName().."T╣i"..TB_STORM_AWARD[awardtype][1].."╖ч▒й╗ю╢п╓╨Nh╦n, nh╦n онюc ph╟n thныngонюc"..TB_STORM_AWARD[awardtype][5][awardid][2]..", nh╦n онюc ph╟n thныng")
			end
		end
	else
		Say("B╣n, nh╦n онюc ph╟n thныng╚╖╢иl╖nh╚б<color=red>"..TB_STORM_AWARD[awardtype][5][awardid][2].."<color>, nh╦n онюc ph╟n thныng╩╟┬Ё?, nh╦n онюc ph╟n thныngl╖nh═ъ╓о║є▓╗─▄l╖nh┴╦"..TB_STORM_AWARD[awardtype][1].."ph╟n thныng kh╕c nўa!",, nh╦n онюc ph╟n thныng2,, nh╦n онюc ph╟n thныng"╓к╡└┴╦!, nh╦n онюc ph╟n thныng╬╥╓╗l╖nh╒т╕Ў╦у┴╦гб/#storm_getaward("..awardtype..","..awardid..",1)",, nh╦n онюc ph╟n thныng"Khлng, nh╦n онюc ph╟n thныngc╟n!/OnCancel")
	end
end

--▓щ╤п╕Ў╚╦оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa╟щ┐Ў
function, nh╦n онюc ph╟n thныngstorm_query(querytype)
	storm_anotherday()
	
	local, nh╦n онюc ph╟n thныngstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng""
	local, nh╦n онюc ph╟n thныngtb_sheet, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
	local, nh╦n онюc ph╟n thныngvar_width,, nh╦n онюc ph╟n thныngvar_align
	if, nh╦n онюc ph╟n thныng(querytype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen
		if, nh╦n онюc ph╟n thныng(GetTask(STORM_TASKID_DAY), nh╦n онюc ph╟n thныng<=, nh╦n онюc ph╟n thныngSTORM_END_DAY), nh╦n онюc ph╟n thныngthen
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"B╣n, nh╦n онюc ph╟n thныng╜ёnh╦t ╡─оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa╚ч╧┬:, nh╦n онюc ph╟n thныng<enter>%╜ёnh╦t ╫▄╗¤phєt╩╟:"..storm_point2str(GetTask(STORM_TASKID_DAY_POINT))
			var_width, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{12,8,8,10}
			var_align, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng2
			tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{"╗ю╢пdanh, nh╦n онюc ph╟n thныng",, nh╦n онюc ph╟n thныng"Sш l╟n",, nh╦n онюc ph╟n thныng"Tr╣ng th╕i ",, nh╦n онюc ph╟n thныng"зi╙m t▌ch lЄy cao nh╩t"}
			for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныngSTORM_GAMEID_MAX, nh╦n онюc ph╟n thныngdo
				if, nh╦n онюc ph╟n thныng(TB_STORM_TASKID[i], nh╦n онюc ph╟n thныng~=, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
					local, nh╦n онюc ph╟n thныngtrycount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngGetTask(TB_STORM_TASKID[i][STORM_TASKIDX_TRYCOUNT])
					local, nh╦n онюc ph╟n thныngstate, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng""
					if, nh╦n онюc ph╟n thныngstorm_valid_game(i), nh╦n онюc ph╟n thныngthen
						state, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"<color=red>╒¤T╣i╜°╨╨<color>"
					elseif, nh╦n онюc ph╟n thныng(trycount, nh╦n онюc ph╟n thныng<=, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
						state, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"<color=blue>Chнa ti╒n h╡nh<color>"
					elseif, nh╦n онюc ph╟n thныng(trycount, nh╦n онюc ph╟n thныng<, nh╦n онюc ph╟n thныngTB_STORM_TRYTIMES[i]), nh╦n онюc ph╟n thныngthen
						state, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"<color=green>з╖ ti╒n h╡nh<color>"
					else
						state, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"<color=8947848>з╖ k╒t thєc<color>"
					end
					tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{
						storm_gamename(i),
						storm_point2str(trycount).."/"..TB_STORM_TRYTIMES[i],
						state,
						storm_point2str(GetTask(TB_STORM_TASKID[i][STORM_TASKIDX_POINTMAX]))
					}
				end
			end
		else
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"ho╣t ощng <color=red>Phong ba th╕ng 9<color> о╖ k╒t thєc!"
		end
	elseif, nh╦n онюc ph╟n thныng(querytype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng", nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныngB╣n, nh╦n онюc ph╟n thныng╫ю╜№╡─t▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa, nh╦n онюc ph╟n thныngl╡:<enter>%s"
		var_width, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{8,10,6,8,10}
		var_align, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng2
		tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{
			"зi╙m t▌ch lЄy hлm nay",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_DAY_POINT)),, nh╦n онюc ph╟n thныng"",
			"зi╙m t▌ch lЄy hлm qua",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_DAY_LASTPOINT))
		}
		tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{
			"зi╙m t▌ch lЄy tu╟n n╡y",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_WEEK_POINT)),, nh╦n онюc ph╟n thныng"",
			"зi╙m t▌ch lЄy tu╟n trнэc",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_WEEK_LASTPOINT))
		}
		tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{
			"зi╙m t▌ch lЄy th╕ng n╡y",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_MONTH_POINT)),, nh╦n онюc ph╟n thныng"",
			"зi╙m t▌ch lЄy th╕ng trнэc",, nh╦n онюc ph╟n thныngstorm_point2str(GetTask(STORM_TASKID_MONTH_LASTPOINT))
		}
		tb_sheet[getn(tb_sheet)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{
			"╔╧Tu╟n┼┼danh, nh╦n онюc ph╟n thныng",, nh╦n онюc ph╟n thныng"<color=yellow>"..TB_STORM_LADDERNAME[storm_getrank(2)].."<color>",, nh╦n онюc ph╟n thныng"",
			"╔╧nguy╓t ┼┼danh, nh╦n онюc ph╟n thныng",, nh╦n онюc ph╟n thныng"<color=yellow>"..TB_STORM_LADDERNAME[storm_getrank(3)].."<color>"
		}
	else
		Say("B╣n, nh╦n онюc ph╟n thныng╧ы┴╦╜т╩▓├┤╬╩╠т?",, nh╦n онюc ph╟n thныng3,, nh╦n онюc ph╟n thныng"╬╥╜ё╠ь╡─оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa/#storm_query(1)",, nh╦n онюc ph╟n thныng"╬╥╫ю╜№╡─оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa/#storm_query(2)",, nh╦n онюc ph╟n thныng"Khлng cу chuy╓n g╫ ойu!/OnCancel")
		return
	end
	str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngformat(str,, nh╦n онюc ph╟n thныngmaketable(tb_sheet,, nh╦n онюc ph╟n thныngvar_width,, nh╦n онюc ph╟n thныngvar_align))
	Say(str,, nh╦n онюc ph╟n thныng2,, nh╦n онюc ph╟n thныng"Ti╒p tЇc t╫m hi╙u/#storm_query(0)",, nh╦n онюc ph╟n thныng"Khлng cу g╫, c╕m мn!/OnCancel")
end

--╗ю╢п╦╡├ўбкбк╫▄
function, nh╦n онюc ph╟n thныngstorm_help()
	local, nh╦n онюc ph╟n thныngtb_option, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
	for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныngSTORM_GAMEID_MAX, nh╦n онюc ph╟n thныngdo
		if, nh╦n онюc ph╟n thныng(TB_STORM_TASKID[i], nh╦n онюc ph╟n thныng~=, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
			tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Liкn quan ho╣t ощng Phong Ba-"..TB_STORM_DESCRIBE[i].."giєp оь/#storm_help_game("..i..")"
		end
	end
	tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Liкn quan ph╟n thныng ho╣t ощng Phong Ba/#storm_help_award(0)"
	tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Ta bi╒t rхi!/OnCancel"
	Say(", nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng╖ч▒й╗ю╢п┤╙8/9/о╒n2/10,, nh╦n онюc ph╟n thныng░№└и╦╬╜Ё╒╜│б,, nh╦n онюc ph╟n thныng╥░█┼╚╬╬ё┴┤,, nh╦n онюc ph╟n thныng╔▒╩╓╩╘┴╢╚╬╬ё., nh╦n онюc ph╟n thныng├┐╠ь╜л╗с╕∙╛▌╧╡═│╓╨╡─│╔╝и╕°│Ў<color=yellow>оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa<color>, nh╦n онюc ph╟n thныng(▓╬╝╙╠ї╝■:, nh╦n онюc ph╟n thныng50╝╢╥╘╔╧═ц╝╥), nh╦n онюc ph╟n thныng.├┐nh╦t m╩yphєt╜лT╣i<color=red>24:00╓о║є╟х┴у<color>,, nh╦n онюc ph╟n thныng╟ыT╣i24:00╟░l╖nh╜▒.<enter>., nh╦n онюc ph╟n thныng├┐╠ь, nh╦n онюc ph╟n thныng<color=red>23:30<color>, nh╦n онюc ph╟n thныng╦╬╜Ё╒╜│б┐к╩╝,, nh╦n онюc ph╟n thныng│╔╝и▓╗╝╟┬╝╜°оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa.",, nh╦n онюc ph╟n thныnggetn(tb_option),, nh╦n онюc ph╟n thныngtb_option)
end

--╗ю╢п╦╡├ўбкбк╠Ї╒╜
function, nh╦n онюc ph╟n thныngstorm_help_game(gameid)
	local, nh╦n онюc ph╟n thныngstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngTB_STORM_HELP[gameid]
	if, nh╦n онюc ph╟n thныng(gameid, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen	--╦╬╜Ё╨ш╥к▓╣│ф╦╡├ўphєt╩¤╔╧╧▐
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngformat(str,, nh╦n онюc ph╟n thныng"╕▀╝╢╦╬╜Ё╒╜│б,, nh╦n онюc ph╟n thныng├┐╚╦├┐╠ь╫ю╢р╓╗─▄l╖nh╚б╡─оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa╩╟<color=yellow>100<color>, nh╦n онюc ph╟n thныng╡у., nh╦n онюc ph╟n thныng│ї╓╨╝╢╦╬╜Ё╒╜│б╫ю╢рphєt▒ЁNh╦n, nh╦n онюc ph╟n thныngонюc<color=yellow>80<color>,, nh╦n онюc ph╟n thныng<color=yellow>90<color>, nh╦n онюc ph╟n thныng╡у.")
	end
	Say(str,, nh╦n онюc ph╟n thныng2,, nh╦n онюc ph╟n thныng"Muшn t╫m hi╙u nhўng th° kh╕c/storm_help",, nh╦n онюc ph╟n thныng"Ta bi╒t rхi!/OnCancel")
end

--╗ю╢п╦╡├ўбкбк╜▒└°
function, nh╦n онюc ph╟n thныngstorm_help_award(awardtype,start)
	if, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
		Say(", nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng├┐╠ь═ц╝╥┐╔╥╘о╒n╬ф┴╓┤л╚╦┤ж,, nh╦n онюc ph╟n thныng╕∙╛▌<color=red>оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa<color>, nh╦n онюc ph╟n thныng┐╔╥╘l╖nh╚б╧р╙ж╡─╜▒└°,, nh╦n онюc ph╟n thныng═м╩▒гм├┐Tu╟nгм├┐nguy╓t ╢╝╙╨╧р╙ж╡─оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa┼┼╨╨<color=red>┼┼danh, nh╦n онюc ph╟n thныng╟░╩о<color>┐╔╥╘T╣i╡▒nguy╓t ╡─╡┌╢■╕Ў╨╟╞┌о╒n╬ф┴╓┤л╚╦┤жl╖nh╜▒",, nh╦n онюc ph╟n thныng4,
			"Xem ph╟n thныng ng╡y/#storm_help_award(1)",
			"Xem ph╟n thныng tu╟n/#storm_help_award(2)",
			"Xem ph╟n thныng th╕ng/#storm_help_award(3)",
			"Ta bi╒t rхi!/OnCancel")
		return
	end
	
	local, nh╦n онюc ph╟n thныngtb_awardstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{"nh╦t ",, nh╦n онюc ph╟n thныng"Tu╟n",, nh╦n онюc ph╟n thныng"nguy╓t "}
	local, nh╦n онюc ph╟n thныngstr, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"оi╙m, nh╦n онюc ph╟n thныngt▌ch, nh╦n онюc ph╟n thныnglЄy, nh╦n онюc ph╟n thныngPhong, nh╦n онюc ph╟n thныngBa"..tb_awardstr[awardtype].."Ph╟n thныng nhн sau:"
	if, nh╦n онюc ph╟n thныng(not, nh╦n онюc ph╟n thныngstart), nh╦n онюc ph╟n thныngthen
		start, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1
	end
	local, nh╦n онюc ph╟n thныnglastvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngnil
	local, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng0
	local, nh╦n онюc ph╟n thныngPERPAGE, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng4
	for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstart,, nh╦n онюc ph╟n thныnggetn(TB_STORM_AWARD[awardtype][5]), nh╦n онюc ph╟n thныngdo
		if, nh╦n онюc ph╟n thныng(count, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныngPERPAGE), nh╦n онюc ph╟n thныngthen	--PERPAGE╧ю╥╗╥│
			break
		end
		count, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныng1
		
		local, nh╦n онюc ph╟n thныngawardvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngTB_STORM_AWARD[awardtype][5][i][1]
		if, nh╦n онюc ph╟n thныng(lastvalue, nh╦n онюc ph╟n thныng~=, nh╦n онюc ph╟n thныngawardvalue), nh╦n онюc ph╟n thныngthen
			if, nh╦n онюc ph╟n thныng(awardvalue, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngthen
				str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<enter>".."T▌ch lЄy"..storm_point2str(awardvalue,3).."phєt"
			else
				if, nh╦n онюc ph╟n thныng(lastvalue), nh╦n онюc ph╟n thныngthen
					str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<enter>"..tb_awardstr[awardtype].."┼┼T╣i╡┌"..storm_point2str(1-lastvalue).."о╒n"..storm_point2str(-awardvalue).."m╩y"
				else
					str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<enter>"..tb_awardstr[awardtype].."┼┼T╣i╡┌"..storm_point2str(-awardvalue).."m╩y"
				end
			end
			lastvalue, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardvalue
		else
			str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."ho╞c, nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng, nh╦n онюc ph╟n thныng"
		end
		str, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngstr.."<color=yellow>"..TB_STORM_AWARD[awardtype][5][i][2].."<color>"
	end
	local, nh╦n онюc ph╟n thныngtb_option, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng{}
	if, nh╦n онюc ph╟n thныng(start, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Trang trнэc/#storm_help_award("..awardtype..","..(start-PERPAGE)..")"
	end
	if, nh╦n онюc ph╟n thныng(start, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng<, nh╦n онюc ph╟n thныnggetn(TB_STORM_AWARD[awardtype][5])), nh╦n онюc ph╟n thныngthen
		tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"Trang k╒ /#storm_help_award("..awardtype..","..(start+PERPAGE)..")"
	end
	tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"╧ыMuшn t╫m hi╙u nhўng th° kh╕c/storm_help"
	tb_option[getn(tb_option)+1], nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng"╬╥Ta bi╒t rхi!/OnCancel"
	Say(str,, nh╦n онюc ph╟n thныnggetn(tb_option),, nh╦n онюc ph╟n thныngtb_option)
end

--Nh╦n, nh╦n онюc ph╟n thныngонюc╕├═ц╝╥T╣i╓╕╢и┼┼╨╨╓╨╡─danh, nh╦n онюc ph╟n thныng┤╬
function, nh╦n онюc ph╟n thныngstorm_getrank(laddertype)
	local, nh╦n онюc ph╟n thныngladderid, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngnil
	if, nh╦n онюc ph╟n thныng(laddertype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen	--nh╦t ┼┼╨╨гм╘▌╬▐
		return, nh╦n онюc ph╟n thныng12
	elseif, nh╦n онюc ph╟n thныng(laddertype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen	--Tu╟n┼┼╨╨
		local, nh╦n онюc ph╟n thныngweekid, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngGetTask(STORM_TASKID_WEEK), nh╦n онюc ph╟n thныng-, nh╦n онюc ph╟n thныngSTORM_LADDER_WEEK
		if(weekid, nh╦n онюc ph╟n thныng>=, nh╦n онюc ph╟n thныng1, nh╦n онюc ph╟n thныngand, nh╦n онюc ph╟n thныngweekid, nh╦n онюc ph╟n thныng<=, nh╦n онюc ph╟n thныng4), nh╦n онюc ph╟n thныngthen, nh╦n онюc ph╟n thныng	--╓╗╙╨2бв3бв4бв5Tu╟n╙╨╔╧Tu╟n
			ladderid, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngSTORM_LADDERID_WEEK1, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныngweekid, nh╦n онюc ph╟n thныng-, nh╦n онюc ph╟n thныng1
		end
	elseif, nh╦n онюc ph╟n thныng(laddertype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng3), nh╦n онюc ph╟n thныngthen	--nguy╓t ┼┼╨╨
		if, nh╦n онюc ph╟n thныng(GetTask(STORM_TASKID_MONTH), nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng10), nh╦n онюc ph╟n thныngthen	--╓╗╙╨10nguy╓t ╙╨╔╧Tu╟n
			ladderid, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngSTORM_LADDERID_MONTH
		end
	else
		return, nh╦n онюc ph╟n thныng12
	end
	
	if, nh╦n онюc ph╟n thныng(ladderid, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
		return, nh╦n онюc ph╟n thныng12
	end
	
	local, nh╦n онюc ph╟n thныngplayername, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngGetName()
	for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныng10, nh╦n онюc ph╟n thныngdo
		if, nh╦n онюc ph╟n thныng(playername, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngLadder_GetLadderInfo(ladderid,, nh╦n онюc ph╟n thныngi)), nh╦n онюc ph╟n thныngthen
			return, nh╦n онюc ph╟n thныngi
		end
	end
	return, nh╦n онюc ph╟n thныng11
end

--┐╔╔¤╝╢╡─╝╙╛н╤щ
function, nh╦n онюc ph╟n thныngstorm_addownexp(, nh╦n онюc ph╟n thныngawardexp, nh╦n онюc ph╟n thныng)
	tl_addPlayerExp(awardexp)
end

--╕°╙ы╚л▓┐╜▒└°
function, nh╦n онюc ph╟n thныngstorm_giveallaward(tb_awards)
	for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныnggetn(tb_awards), nh╦n онюc ph╟n thныngdo
		storm_giveoneaward(tb_awards[i])
	end
end

--╕°╙ы╥╗╕Ў╜▒└°
function, nh╦n онюc ph╟n thныngstorm_giveoneaward(tb_award)
	local, nh╦n онюc ph╟n thныngawardtype, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngtb_award[1]
	local, nh╦n онюc ph╟n thныngawardcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngtb_award[3]
	if, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen	--╞╒═и╬я╞╖
		while, nh╦n онюc ph╟n thныng(awardcount, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngdo
			WriteLog("[STORM_GIVE]\t"..date("%y-%m-%d,%H:%M").."\t"..GetAccount().."\t"..GetName().."\tAddItem("..join(tb_award[2])..")")
			AddItem(storm_splittb(tb_award[2]))
			awardcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardcount, nh╦n онюc ph╟n thныng-, nh╦n онюc ph╟n thныng1
		end
	elseif, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen	--╗╞╜Ё╬я╞╖
		while, nh╦n онюc ph╟n thныng(awardcount, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngdo
			WriteLog("[STORM_GIVE]\t"..date("%y-%m-%d,%H:%M").."\t"..GetAccount().."\t"..GetName().."\tAddGoldItem("..join(tb_award[2])..")")
			AddGoldItem(storm_splittb(tb_award[2]))
			awardcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardcount, nh╦n онюc ph╟n thныng-, nh╦n онюc ph╟n thныng1
		end
	elseif, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng3), nh╦n онюc ph╟n thныngthen	--╖╟╬я╞╖
		if, nh╦n онюc ph╟n thныng(tb_award[2], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen	--╛н╤щ
			WriteLog("[STORM_GIVE]\t"..date("%y-%m-%d,%H:%M").."\t"..GetAccount().."\t"..GetName().."\tAddOwnExp("..awardcount..")")
			storm_addownexp(awardcount)
		else	--┴Ї╫ў└й╒╣
			WriteLog("storm_giveoneaward, nh╦n онюc ph╟n thныng:, nh╦n онюc ph╟n thныngerror, nh╦n онюc ph╟n thныngtb_award[2]")
		end
	elseif, nh╦n онюc ph╟n thныng(awardtype, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng4), nh╦n онюc ph╟n thныngthen	--╦ц╗·╬я╞╖
		while, nh╦n онюc ph╟n thныng(awardcount, nh╦n онюc ph╟n thныng>, nh╦n онюc ph╟n thныng0), nh╦n онюc ph╟n thныngdo
			local, nh╦n онюc ph╟n thныnggiveindex, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngrandom(getn(tb_award[2]))
			storm_giveoneaward(tb_award[2][giveindex])
			awardcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngawardcount, nh╦n онюc ph╟n thныng-, nh╦n онюc ph╟n thныng1
		end
	else
		WriteLog("[STORM_GIVE]\t"..date("%y-%m-%d,%H:%M").."\t"..GetAccount().."\t"..GetName().."\tstorm_giveoneaward, nh╦n онюc ph╟n thныng:, nh╦n онюc ph╟n thныngerror, nh╦n онюc ph╟n thныngawardtype")
	end
end

--╣└╦у╚л▓┐╜▒└°╬я╞╖╩¤┴┐
function, nh╦n онюc ph╟n thныngstorm_countallaward(tb_awards)
	local, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng0
	for, nh╦n онюc ph╟n thныngi, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1,, nh╦n онюc ph╟n thныnggetn(tb_awards), nh╦n онюc ph╟n thныngdo
		if, nh╦n онюc ph╟n thныng(tb_awards[i][1], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng1), nh╦n онюc ph╟n thныngthen	--╞╒═и╬я╞╖
			count, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныngtb_awards[i][3]
		elseif, nh╦n онюc ph╟n thныng(tb_awards[i][1], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng2), nh╦n онюc ph╟n thныngthen	--╗╞╜Ё╬я╞╖
			count, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныngtb_awards[i][3]*2
		elseif, nh╦n онюc ph╟n thныng(tb_awards[i][1], nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныng4), nh╦n онюc ph╟n thныngthen	--╦ц╗·╬я╞╖
			count, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныngcount, nh╦n онюc ph╟n thныng+, nh╦n онюc ph╟n thныngtb_awards[i][3]*2
		end
	end
	return, nh╦n онюc ph╟n thныngcount
end

--╜л╩¤╫щ▓Ё┐к
function, nh╦n онюc ph╟n thныngstorm_splittb(tb,, nh╦n онюc ph╟n thныngn)
	if, nh╦n онюc ph╟n thныng(n, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныngnil), nh╦n онюc ph╟n thныngthen
		n, nh╦n онюc ph╟n thныng=, nh╦n онюc ph╟n thныng1
	end
	if, nh╦n онюc ph╟n thныng(n, nh╦n онюc ph╟n thныng==, nh╦n онюc ph╟n thныnggetn(tb)), nh╦n онюc ph╟n thныngthen
		return, nh╦n онюc ph╟n thныngtb[n]
	end
	return, nh╦n онюc ph╟n thныngtb[n],, nh╦n онюc ph╟n thныngstorm_splittb(tb,n+1)
end
